<!DOCTYPE html>
<html>

<head>
    <title>Meme Generator</title>
    <style>
        #memeCanvas {
            border: 1px solid black;
        }

    </style>
</head>

<body>
    <h1>Meme Generator</h1>
    <input type="file" id="imageInput" accept="image/*">
    <input type="text" id="textInput" placeholder="Enter meme text here" oninput="generateMeme()">
    <input type="color" id="colorInput" value="#000000" oninput="generateMeme()">
    <select id="fontInput" oninput="generateMeme()">
        <option value="Arial">Arial</option>
        <option value="Comic Sans MS">Comic Sans MS</option>
        <option value="Courier New">Courier New</option>
    </select>
    <button onclick="generateMeme()">Generate Meme</button>
    <button onclick="saveMeme()">Save Meme</button>
    <canvas id="memeCanvas" onmousedown="startDrag(event)" onmousemove="dragText(event)" onmouseup="stopDrag()"></canvas>

    <script>
        const canvas = document.getElementById('memeCanvas');
        const ctx = canvas.getContext('2d');
        let dragging = false;
        let textX = 50,
            textY = 50;

        function startDrag(e) {
            let rect = canvas.getBoundingClientRect();
            let x = e.clientX - rect.left;
            let y = e.clientY - rect.top;
            if (x >= textX && x <= textX + ctx.measureText(document.getElementById('textInput').value).width && y >= textY - 30 && y <= textY) {
                dragging = true;
            }
        }

        function dragText(e) {
            if (dragging) {
                let rect = canvas.getBoundingClientRect();
                textX = e.clientX - rect.left;
                textY = e.clientY - rect.top;
                generateMeme();
            }
        }

        function stopDrag() {
            dragging = false;
        }

        function generateMeme() {
            const img = new Image();
            img.onload = function() {
                canvas.width = img.width;
                canvas.height = img.height;
                ctx.drawImage(img, 0, 0, img.width, img.height);
                ctx.font = '30px ' + document.getElementById('fontInput').value;
                ctx.fillStyle = document.getElementById('colorInput').value;
                ctx.fillText(document.getElementById('textInput').value, textX, textY);
            }
            img.src = URL.createObjectURL(document.getElementById('imageInput').files[0]);
        }

        function saveMeme() {
            let link = document.createElement('a');
            link.download = 'meme.png';
            link.href = canvas.toDataURL();
            link.click();
        }

    </script>
</body>

</html>
